# Kafka Configuration
kafka:
  broker: "localhost:9092"
  # Topic to read from for Kafka→MQTT bridging (static mode)
  source_topic: "events"
  # Topic to write to for MQTT→Kafka bridging (static mode)
  dest_topic: "mqtt-to-kafka"
  group_id: "kafka-mqtt-bridge"
  
  # SASL Authentication (required for Azure Event Hubs)
  # Azure Event Hubs uses SASL PLAIN authentication with the connection string
  # sasl:
  #   enabled: true
  #   mechanism: "PLAIN"  # Supported: PLAIN, SCRAM-SHA-256, SCRAM-SHA-512
  #   # For Azure Event Hubs, use "$ConnectionString" as username
  #   username: "$ConnectionString"
  #   # For Azure Event Hubs, use the full connection string as password
  #   # Format: Endpoint=sb://<namespace>.servicebus.windows.net/;SharedAccessKeyName=<keyname>;SharedAccessKey=<key>
  #   password: "your-connection-string-here"
  
  # TLS Configuration (required for Azure Event Hubs)
  # Azure Event Hubs requires TLS for all connections
  # tls:
  #   enabled: true
  #   # For Azure Event Hubs, system CA certificates are sufficient
  #   # ca_file: "/path/to/ca.crt"  # Optional: Path to custom CA certificate
  #   # cert_file: "/path/to/client.crt"  # Optional: For mutual TLS
  #   # key_file: "/path/to/client.key"   # Optional: For mutual TLS
  #   insecure_skip_verify: false
  
  # Dynamic topic mappings for MQTT→Kafka bridging (alternative to dest_topic)
  # Supports wildcards: + (single level), # (multi-level), * (single level alias)
  # Use {1}, {2}, etc. to reference captured wildcard segments in target
  # topic_mappings:
  #   - source: "sensors/+/data"
  #     target: "kafka-sensors-{1}"
  #   - source: "devices/#"
  #     target: "kafka-devices"

# MQTT Configuration
mqtt:
  broker: "localhost"
  port: 1883
  username: ""
  password: ""
  # Topic to subscribe to for MQTT→Kafka bridging (static mode)
  source_topic: "mqtt/events"
  # Topic to publish to for Kafka→MQTT bridging (static mode)
  dest_topic: "kafka/events"
  client_id: "kafka-mqtt-bridge"
  
  # QoS level for MQTT operations (0, 1, or 2). Default: 1
  # QoS 0: At most once - Fire and forget, no acknowledgment
  # QoS 1: At least once - Message is delivered at least once (may be duplicated)
  # QoS 2: Exactly once - Message is delivered exactly once (highest overhead)
  # For MQTT→Kafka bridging, messages are acknowledged (Ack) only after 
  # successful delivery to Kafka, ensuring reliable message transfer.
  qos: 1
  
  # CleanSession flag. Default: false when QoS > 0, true otherwise
  # When false, the broker stores subscriptions and queued messages for the client
  # This is important for QoS > 0 to ensure message delivery after reconnection
  # clean_session: false
  
  # Dynamic topic mappings for Kafka→MQTT bridging (alternative to dest_topic)
  # Supports wildcards: + (single level), # (multi-level), * (single level alias)
  # Use {1}, {2}, etc. to reference captured wildcard segments in target
  # topic_mappings:
  #   - source: "kafka-events-*"
  #     target: "mqtt/{1}/events"
  
  # TLS Configuration for secure MQTT connections
  # tls:
  #   enabled: true
  #   # Path to CA certificate file for verifying server certificate
  #   ca_file: "/path/to/ca.crt"
  #   # Path to client certificate file (for mutual TLS authentication)
  #   cert_file: "/path/to/client.crt"
  #   # Path to client private key file (for mutual TLS authentication)
  #   key_file: "/path/to/client.key"
  #   # Skip server certificate verification (not recommended for production)
  #   insecure_skip_verify: false

# Bridge Configuration
bridge:
  name: "kafka-mqtt-bridge"
  log_level: "info"
  buffer_size: 100

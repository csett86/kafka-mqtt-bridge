# Kafka Configuration
kafka:
  broker: "localhost:9092"
  group_id: "kafka-mqtt-bridge"
  
  # SASL Authentication (required for Azure Event Hubs)
  # Azure Event Hubs uses SASL PLAIN authentication with the connection string
  # sasl:
  #   enabled: true
  #   mechanism: "PLAIN"  # Supported: PLAIN, SCRAM-SHA-256, SCRAM-SHA-512
  #   # For Azure Event Hubs, use "$ConnectionString" as username
  #   username: "$ConnectionString"
  #   # For Azure Event Hubs, use the full connection string as password
  #   # Format: Endpoint=sb://<namespace>.servicebus.windows.net/;SharedAccessKeyName=<keyname>;SharedAccessKey=<key>
  #   password: "your-connection-string-here"
  
  # TLS Configuration (required for Azure Event Hubs)
  # Azure Event Hubs requires TLS for all connections
  # tls:
  #   enabled: true
  #   # When ca_file is not specified, system CA certificates are used (recommended for most cases)
  #   # ca_file: "/path/to/ca.crt"  # Optional: Path to custom CA certificate
  #   # cert_file: "/path/to/client.crt"  # Optional: For mutual TLS
  #   # key_file: "/path/to/client.key"   # Optional: For mutual TLS
  #   insecure_skip_verify: false

# MQTT Configuration
mqtt:
  broker: "localhost"
  port: 1883
  username: ""
  password: ""
  client_id: "kafka-mqtt-bridge"
  
  # QoS level for MQTT operations (0, 1, or 2). Default: 1
  # QoS 0: At most once - Fire and forget, no acknowledgment
  # QoS 1: At least once - Message is delivered at least once (may be duplicated)
  # QoS 2: Exactly once - Message is delivered exactly once (highest overhead)
  # For MQTTâ†’Kafka bridging, messages are acknowledged (Ack) only after 
  # successful delivery to Kafka, ensuring reliable message transfer.
  qos: 1
  
  # CleanSession flag. Default: false when QoS > 0, true otherwise
  # When false, the broker stores subscriptions and queued messages for the client
  # This is important for QoS > 0 to ensure message delivery after reconnection
  # clean_session: false
  
  # TLS Configuration for secure MQTT connections
  # tls:
  #   enabled: true
  #   # When ca_file is not specified, system CA certificates are used (recommended for most cases)
  #   # ca_file: "/path/to/ca.crt"  # Optional: Path to custom CA certificate
  #   # Path to client certificate file (optional, for mutual TLS authentication)
  #   cert_file: "/path/to/client.crt"
  #   # Path to client private key file (optional, for mutual TLS authentication)
  #   key_file: "/path/to/client.key"
  #   # Skip server certificate verification (not recommended for production)
  #   insecure_skip_verify: false

# Bridge Configuration
bridge:
  name: "kafka-mqtt-bridge"
  log_level: "info"
  buffer_size: 100
  
  # MQTT to Kafka bridging configuration
  # Messages from MQTT source_topic will be forwarded to Kafka dest_topic
  mqtt_to_kafka:
    source_topic: "mqtt/events"
    dest_topic: "mqtt-to-kafka"
  
  # Kafka to MQTT bridging configuration
  # Messages from Kafka source_topic will be forwarded to MQTT dest_topic
  kafka_to_mqtt:
    source_topic: "events"
    dest_topic: "kafka/events"

# Azure Event Hubs Schema Registry Configuration (optional)
# Enables Avro serialization/deserialization for messages using Azure Schema Registry
# schema_registry:
#   # Enable Schema Registry integration
#   enabled: true
#   
#   # Fully qualified namespace of the Schema Registry
#   # e.g., "<namespace>.servicebus.windows.net"
#   fully_qualified_namespace: "your-namespace.servicebus.windows.net"
#   
#   # Schema group name in the registry
#   group_name: "your-schema-group"
#   
#   # Name of the schema to use for serialization
#   schema_name: "your-schema-name"
#   
#   # Optional: Avro schema JSON content for auto-registration
#   # If not provided, schema must already exist in the registry
#   # schema_content: '{"type":"record","name":"Event","fields":[{"name":"id","type":"string"},{"name":"data","type":"string"}]}'
#   
#   # Enable automatic schema registration (default: false)
#   # When enabled, the schema will be registered with the registry if it doesn't exist
#   # auto_register_schema: true
#   
#   # Enable schema caching (default: true)
#   # cache_enabled: true
#   
#   # Azure AD authentication (optional)
#   # If not provided, DefaultAzureCredential will be used
#   # tenant_id: "your-tenant-id"
#   # client_id: "your-client-id"
#   # client_secret: "your-client-secret"
